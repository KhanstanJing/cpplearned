# 通过swap函数学习cpp中的变量、引用与指针

## 变量的交换：`swap1`

现在我们定义一个函数。我们的目标是：这个函数可以将两个变量的值进行交换

函数体如下：
```cpp
void swap1(int a, int b) {
	int temp;
	temp = a;
	a = b;
	b = temp;
}
```
在这段代码中，我们定义了一个函数，这个函数需要接收两个整型`变量`，`a`和`b`
在函数内部，我们先创建了一个整型变量`temp`，将`a`的值赋给了temp，而后将`b`的值赋给`a`，最后把`temp`的值赋给`b`

当我们在主函数中运行这个函数的时候，我们是这样使用的：
```cpp
void main() {
	int left = 10, right = 20;
	swap1(left, right);
}
```
可以看到，我们定义了两个变量，而后将两个值赋给了它们，并且使用了`swap1`函数对于这两个变量进行操作

如果你从未接触过编程语言，那么这可能就是你的第一反应，即认为单纯地将“物体”进行交换即可。这个例子也是学习编程时大多数老师会提出的一个问题，给同学们思考
这个问题的解决方案一般也就是大多数人入门编程的第一课

我们希望得到的结果是上面的两个变量变为：
```cpp
left = 20, right = 10
```
但是， `swap1` 的输出结果为：
```cpp
left = 10, right = 20
```

## 为什么我们输出的结果没有任何变化
### 变量：名与值

现在来考虑我们刚刚设定的目标：

“现在我们定义一个函数。我们的目标是：这个函数可以将两个变量的值进行交换”

注意到，我们最初设定的目标中，我们希望交换的是**两个变量的值**
但是，我们真的了解什么是`变量`，什么是`值`吗？
将这两个概念搞懂，我们就已经可以自学绝大部分的cpp的内容了

我们来思考一个问题，`你`的这个概念是怎么产生的，你认为什么可以代表`你`？
我们假设你是一个`男性`，身高为`175cm`，体重为`70kg`
但是当我大喊：“那个**男性**！”，或者“那个**175cm**的人！”，或者“那个**70kg**的人！”的时候，除非你的周围是一群女性，或者你在一群很高很高（也可能是很矮很矮）的人群中，或者你在一群超级肥胖的人（或者超级瘦）的人群中，不然你很难判断我是否在叫`你`
很遗憾，我们的计算机也不能
因此，我们需要为`你`设计点特别的东西，来方便我们找到`你`，无论找到你的目的是什么。
所以，`你`有一个`名字`

计算机中也一样。我们编程的目的在于设计一些方法，对于各种东西进行运算，或者把某些东西存放起来，然后我们利用计算机可以轻松地查找到，总之，我们现在有`某个东西`
因此，我们要设计一个`变量`，来表示`某个东西`来在程序中进行运算，而为了运算能够（准确地）进行，`变量`必须有一个名字，即`变量名`
例如上面出现的`left`和`right`，更详细地说，我们在现实世界中遇到了某些问题，我们需要写一个程序来解决这个问题
在我们把这个问题抽象化的过程中，我们发现有某个东西需要被进行计算，于是我们在这里将它命名为`left`，并且赋给它一个初始的值为`10`
**现在，我们得到了一个变量，它的名为`left`，它的值为`10`。** 这样，我们就能开始计算了
因此，我们必须时刻记住注意，当我们使用`left`的时候，我们到底是想干嘛：**是想用这个变量还是这个名字？**

总结一下：
`某个东西`需要被抽象出来加入运算——此`变量`
`left`——`变量名`
`10`——我们在此时给它赋的`值`

此外，在cpp中，我们还必须指明变量的`类型`，即`type`，例如整数`int`、浮点数`float`等
目前有一些语言（例如python）在某些情况下不需要

如果你足够机灵，你应该已经发现了问题不对的地方：

“在这段代码中，我们定义了一个函数，这个函数需要接收两个整型`变量`，`a`和`b`”

但是，`a`和`b`真的是变量吗？
答案显然是否定的。一般来说，`a`和`b`我们一般称之为参数。你可以看到，我们只在

因此，问题在于，我们在主函数中传递参数的时候，只传递了变量的值，却并没有传递变量本身
所以你可以这样理解`swap1`的运作方式：
它会在运行时检查它所要接收什么样的参数，而后根据条件建立变量。例如这里它就会建立变量`a`和`b`，即在内存中分配两块整数型空间，一个给`a`，另一个给`b`
接着它会把接收到的两个变量`left`和`right`的值复制给`a`和`b`，而后在函数体内用这两个参数（`a`和`b`）进行计算，等到计算结束后，该函数返回一个结果，在计算机的内存空间中销毁之前分配给`a`和`b`的空间

举个例子，假设现在水果摊上的苹果和西瓜的标签标错了，我们希望交换水果摊上的苹果和西瓜的标签。但是在实际执行过程中，我们只是把苹果和西瓜的价格分别抄在两张新的标签上，将苹果的价格记录在一张临时标签上，把苹果标签上的价格擦掉写上西瓜的价格，而后将西瓜标签上的价格擦掉写上临时标签上的价格，结束后把两张标签扔掉了。

这个操作不能产生预期效果的根本原因，在于cpp中使用函数的时候，函数对于参数调用的方法。

因此，我们应该做如下改进。

## 变量的交换：swap2
函数体如下：
```cpp
void swap2(int& a, int& b) {
	int temp;
	temp = a;
	a = b;
	b = temp;
}
```
当我们在主函数中运行这个函数的时候，我们是这样使用的：
```cpp
void main() {
	int left = 10, right = 20;
	swap2(left, right);
}
```
这次，我们可以得到正确的结果：
```cpp
left = 20, right = 10
```
下面来通过打印一些信息看一看这个过程中发生了什么。
```cpp
cout << "before swap2:\n"
	<< "left = " << left << ", right = " << right << ", &left = " << &left << ", &right = " << &right << endl;
swap2(left, right);
cout << "after swap2:\n"
	<< "left = " << left << ", right = " << right << ", &left = " << &left << ", &right = " << &right << endl;
```
在这些命令中，我们依次输出了程序运行前和程序运行后的left和right的值，以及left和right的地址&left和&right。

下面是输出的结果：
```cpp
before swap2:
left = 10, right = 20, &left = 0x61fe0c, &right = 0x61fe08
after swap2:
left = 20, right = 10, &left = 0x61fe0c, &right = 0x61fe08
```
我们可以看到，在这个过程中，left和right的地址都没有变，或者说这两个地址仍然存储着这两个变量（名字），而这两个变量的信息被改变了。
